<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root { --primary: #0D47A1; --secondary: #1976D2; --warning: #FBC02D; --bg: #f8fafc; }
    body { font-family: 'Kanit', sans-serif; background: var(--bg); margin: 0; padding: 10px; }
    .container { max-width: 500px; margin: 0 auto; background: white; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); padding: 20px; box-sizing: border-box; }
    h1 { color: var(--primary); text-align: center; font-size: 22px; border-bottom: 3px solid var(--warning); padding-bottom: 10px; }
    h2 { font-size: 18px; color: var(--primary); margin-top: 0; }
    
    .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 15px; }
    .btn-menu { border: none; border-radius: 15px; padding: 20px 10px; color: white; cursor: pointer; font-weight: 600; display: flex; flex-direction: column; align-items: center; gap: 8px; font-size: 14px; transition: 0.2s; }
    .btn-menu:active { transform: scale(0.95); }
    .btn-site { background: #06b6d4; } .btn-in { background: #22c55e; } .btn-out { background: #f59e0b; }
    .btn-rep { background: #a855f7; } .btn-exp { background: #ec4899; } .btn-cap { background: #64748b; }
    
    .page { display: none; }
    .active { display: block !important; animation: fadeIn 0.3s ease; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    .input-group { margin-bottom: 15px; text-align: left; }
    label { display: block; margin-bottom: 5px; font-weight: 600; color: #555; font-size: 14px; }
    input, select, textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box; font-family: 'Kanit'; font-size: 15px; }
    
    .card-site { background: #f1f5f9; border-radius: 15px; padding: 15px; margin-bottom: 15px; border-left: 5px solid var(--primary); }
    .main-btn { background: var(--primary); color: white; width: 100%; padding: 15px; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; margin-top: 10px; cursor: pointer; }
    .back-btn { background: #888; margin-top: 8px; }
    .summary-box { background: #fffde7; padding: 10px; border-radius: 10px; border: 1px solid #fbc02d; margin-top: 10px; font-size: 14px; }
  </style>
</head>
<body>

<div class="container">
  
  <div id="page-home" class="page active">
    <h1>2026 AEC Report</h1>
    <div class="input-group">
      <label><i class="fas fa-user"></i> ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô (Name)</label>
      <input type="text" id="userName" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠">
    </div>
    <div class="input-group">
      <label><i class="fas fa-globe"></i> ‡∏†‡∏≤‡∏Ñ‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î (Region)</label>
      <select id="userRegion">
        <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏Ñ --</option>
        <option>BKK</option><option>CR</option><option>ER</option><option>NER</option>
        <option>NR</option><option>SR</option><option>TE</option><option>DR</option><option>OFFICE</option>
      </select>
    </div>
    <div class="menu-grid">
      <button class="btn-menu btn-site" onclick="navigateTo('page-1-3', 'Site Check In')"><i class="fas fa-map-pin fa-2x"></i>Site Check In</button>
      <button class="btn-menu btn-in" onclick="navigateTo('page-1-3', 'Check In')"><i class="fas fa-sign-in-alt fa-2x"></i>Check In</button>
      <button class="btn-menu btn-out" onclick="navigateTo('page-1-3', 'Check Out')"><i class="fas fa-sign-out-alt fa-2x"></i>Check Out</button>
      <button class="btn-menu btn-rep" onclick="navigateTo('page-4', 'Report')"><i class="fas fa-file-alt fa-2x"></i>Report</button>
      <button class="btn-menu btn-exp" onclick="navigateTo('page-5', 'Expenses')"><i class="fas fa-wallet fa-2x"></i>Expenses</button>
      <button class="btn-menu btn-cap" onclick="navigateTo('page-6', 'Capture')"><i class="fas fa-camera fa-2x"></i>Capture</button>
    </div>
  </div>

  <div id="page-1-3" class="page">
    <h2 id="title-1-3"></h2>
    <div id="fields-1-3"></div>
    <div class="input-group">
      <label>üì∏ ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô</label>
      <input type="file" id="st-file" accept="image/*" capture="camera">
    </div>
    <button class="main-btn" onclick="submitData('Standard')">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    <button class="main-btn back-btn" onclick="goHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
  </div>

  <div id="page-4" class="page">
    <h2>üìù ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</h2>
    <div class="input-group">
      <label>‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö‡πÉ‡∏Ñ‡∏£</label><input type="text" id="r_buddy">
    </div>
    <div class="input-group">
      <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</label><input type="date" id="r_date">
    </div>
    <div class="input-group">
      <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å</label>
      <select id="r_jobtype">
        <option>‡∏á‡∏≤‡∏ô CR</option><option>‡∏á‡∏≤‡∏ô OFFICE</option><option>‡∏á‡∏≤‡∏ô TE</option><option>‡∏á‡∏≤‡∏ô DRONE</option>
      </select>
    </div>
    <div id="sites-area">
      </div>
    <button class="main-btn" onclick="submitData('Report')">‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    <button class="main-btn back-btn" onclick="goHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
  </div>

  <div id="page-5" class="page">
    <h2>üí∞ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</h2>
    <div class="input-group"><label>‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ã‡∏ï‡πå</label><input type="text" id="ex_site"></div>
    <div class="input-group"><label>‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏£‡∏ñ</label><input type="number" id="ex_oil" class="calc" value="0"></div>
    <div class="input-group"><label>‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å</label><input type="number" id="ex_hotel" class="calc" value="0"></div>
    <div class="input-group"><label>‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏û‡∏¥‡πÄ‡∏®‡∏©</label><input type="number" id="ex_spc" class="calc" value="0"></div>
    
    <div class="summary-box">
      <strong>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô: <span id="ex_total">0</span> ‡∏ö‡∏≤‡∏ó</strong>
    </div>
    
    <div class="input-group" style="margin-top:15px;">
      <label>üì∏ ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏¥‡∏• (‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÑ‡∏î‡πâ)</label>
      <input type="file" id="ex_files" multiple accept="image/*">
    </div>
    <button class="main-btn" onclick="submitData('Expenses')">‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</button>
    <button class="main-btn back-btn" onclick="goHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
  </div>

  <div id="page-6" class="page">
    <h2>üì∏ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</h2>
    <div class="input-group">
      <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
      <select id="date-select-6"></select>
    </div>
    <button class="main-btn" onclick="alert('‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...')">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
    <button class="main-btn back-btn" onclick="goHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
  </div>

</div>

<script>
  let siteCount = 0;

  function navigateTo(pageId, statusName) {
    const name = document.getElementById('userName').value;
    const region = document.getElementById('userRegion').value;

    if (!name || !region) {
      alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö");
      return;
    }

    localStorage.setItem('aec_name', name);
    localStorage.setItem('aec_reg', region);

    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    const target = document.getElementById(pageId);
    target.classList.add('active');

    // ‡∏•‡∏≠‡∏à‡∏¥‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤ 1-3
    if (pageId === 'page-1-3') {
      document.getElementById('title-1-3').innerText = "üìç " + statusName;
      let html = "";
      if (statusName !== 'Site Check In') {
        html = `
          <div class="input-group"><label>‡πÉ‡∏ä‡πâ‡∏£‡∏ñ‡πÉ‡∏Ñ‡∏£</label><input type="text" id="f_car"></div>
          <div class="input-group"><label>‡πÄ‡∏•‡∏Ç‡πÑ‡∏°‡∏•‡πå</label><input type="number" id="f_mile"></div>
          <div class="input-group"><label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</label><input type="text" id="f_place"></div>
          <div class="input-group"><label>‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</label><textarea id="f_plan"></textarea></div>
        `;
      }
      document.getElementById('fields-1-3').innerHTML = html;
    }

    // ‡∏•‡∏≠‡∏à‡∏¥‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤ 4 (‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ã‡∏ï‡πå‡πÅ‡∏£‡∏Å)
    if (pageId === 'page-4') {
      document.getElementById('sites-area').innerHTML = "";
      siteCount = 0;
      addSiteField();
    }
  }

  function addSiteField() {
    if (siteCount >= 4) return;
    siteCount++;
    const area = document.getElementById('sites-area');
    const card = document.createElement('div');
    card.className = "card-site";
    card.id = "site-card-" + siteCount;
    card.innerHTML = `
      <strong>üèôÔ∏è ‡πÑ‡∏ã‡∏ï‡πå‡∏ó‡∏µ‡πà ${siteCount}</strong>
      <div class="input-group"><label>‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ã‡∏ï‡πå</label><input type="text" id="s_name_${siteCount}"></div>
      <div class="input-group"><label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô</label><textarea id="s_detail_${siteCount}"></textarea></div>
      ${siteCount < 4 ? `<button type="button" onclick="addSiteField()" style="font-size:12px; cursor:pointer;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ã‡∏ï‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>` : ''}
    `;
    area.appendChild(card);
  }

  // ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏ô‡πâ‡∏≤ 5
  document.addEventListener('input', function (e) {
    if (e.target.classList.contains('calc')) {
      let total = 0;
      document.querySelectorAll('.calc').forEach(input => {
        total += Number(input.value) || 0;
      });
      document.getElementById('ex_total').innerText = total.toLocaleString();
    }
  });

  function goHome() {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('page-home').classList.add('active');
  }

  function submitData(type) {
    alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• " + type + " ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
    goHome();
  }

  window.onload = function() {
    document.getElementById('userName').value = localStorage.getItem('aec_name') || "";
    document.getElementById('userRegion').value = localStorage.getItem('aec_reg') || "";
    
    const sel = document.getElementById('date-select-6');
    for(let i=0; i<8; i++){
      let d = new Date(); d.setDate(d.getDate() - i);
      let opt = document.createElement('option');
      opt.value = d.toLocaleDateString('th-TH');
      opt.innerText = d.toLocaleDateString('th-TH');
      sel.appendChild(opt);
    }
  };
</script>

</body>
</html>
